---
import ScrollIndicator from './ScrollIndicator.astro';

const subtitleWords = ['strategy', 'product', 'presence', 'communication', 'success'];
---

<div class="relative min-h-screen bg-gradient-to-br from-primary via-primary/95 to-secondary overflow-hidden">
  <div class="absolute inset-0 bg-[radial-gradient(circle_at_center,_var(--tw-gradient-stops))] from-accent/5 via-transparent to-transparent"></div>
  
  <div class="absolute inset-0 overflow-hidden opacity-5 pointer-events-none">
    <div class="absolute inset-0 flex items-center justify-center">
      <div class="relative w-full h-full">
        <svg 
          xmlns="http://www.w3.org/2000/svg" 
          viewBox="-0.5 -0.5 235 235"
          class="w-full h-full text-accent animate-float"
        >
          <defs>
            <linearGradient id="comet-trail" x1="0%" y1="0%" x2="100%" y2="100%">
              <stop offset="0%" stop-color="currentColor" stop-opacity="0.8"/>
              <stop offset="100%" stop-color="currentColor" stop-opacity="0"/>
            </linearGradient>
          </defs>
          
          <g class="animate-pulse-slow">
            <path 
              d="M 4 80 Q 110 7 220 20" 
              fill="none" 
              stroke="currentColor"
              stroke-width="1"
            >
              <animate
                attributeName="stroke-dashoffset"
                from="0"
                to="20"
                dur="2s"
                repeatCount="indefinite"
              />
            </path>
            <path 
              d="M 135 226 Q 218 130 220 20" 
              fill="none" 
              stroke="currentColor"
              stroke-width="1"
            >
              <animate
                attributeName="stroke-dashoffset"
                from="0"
                to="20"
                dur="2s"
                repeatCount="indefinite"
              />
            </path>
            <path 
              d="M 4 80 Q 41 173 135 226" 
              fill="none" 
              stroke="currentColor"
              stroke-width="1"
            >
              <animate
                attributeName="stroke-dashoffset"
                from="0"
                to="40"
                dur="2s"
                repeatCount="indefinite"
              />
            </path>
          </g>
        </svg>
      </div>
    </div>
  </div>

  <div class="container mx-auto px-4 min-h-screen flex items-center relative z-10">
    <div class="flex flex-col items-center text-center max-w-4xl mx-auto mt-[-80px]">
      <!-- Subtitle with typewriter effect -->
      <div class="text-tertiary font-medium mb-6 tracking-wide animate-fade-in flex items-center h-8">
        <span>Shaping your digital</span>
        <span id="typewriter" class="relative inline-block w-34 ml-2">
          <span class="typewriter-text"></span>
          <span class="typewriter-cursor">|</span>
        </span>
      </div>
      
      <!-- Main heading -->
      <h1 class="text-4xl sm:text-5xl md:text-6xl font-bold text-white mb-8 leading-tight">
        We help you turn market insights into digital excellence
      </h1>
    
      <!-- CTA Buttons -->
      <div class="flex flex-col sm:flex-row gap-4 justify-center w-full sm:w-auto">
        <a 
          href="#contact"
          class="bg-highlight hover:bg-highlight/90 text-white px-8 py-3 rounded-lg font-semibold flex items-center justify-center gap-2 transition-all"
        >
          Contacteer ons
          <svg 
            xmlns="http://www.w3.org/2000/svg" 
            width="20" 
            height="20" 
            viewBox="0 0 24 24" 
            fill="none" 
            stroke="currentColor" 
            strokeWidth="2" 
            strokeLinecap="round" 
            strokeLinejoin="round"
          >
            <path d="M22 2L11 13M22 2L15 22L11 13L2 9L22 2Z" />
          </svg>
        </a>
        <a 
          href="#services"
          class="border border-accent text-accent hover:bg-accent/10 px-8 py-3 rounded-lg font-semibold transition-all"
        >
          Onze diensten
        </a>
      </div>
    </div>
  </div>
</div>

<style>
  .typewriter-cursor {
    animation: blink 0.7s infinite;
    color: currentColor;
  }

  @keyframes blink {
    0%, 100% { opacity: 1; }
    50% { opacity: 0; }
  }

  @keyframes dash {
    to {
      stroke-dashoffset: 20;
    }
  }

  .animate-dash {
    animation: dash 20s linear infinite;
  }

  .animate-pulse-slow {
    animation: pulse 4s cubic-bezier(0.4, 0, 0.6, 1) infinite;
  }

  @keyframes pulse {
    0%, 100% {
      opacity: 1;
    }
    50% {
      opacity: 0.5;
    }
  }
</style>

<script>
  function setupTypewriter() {
    const words = ['strategy', 'product', 'presence', 'communication', 'success'];
    const typewriterText = document.querySelector('.typewriter-text');
    let wordIndex = 0;
    let charIndex = 0;
    let isDeleting = false;
    let typingDelay = 100;
    let deletingDelay = 50;
    let newWordDelay = 2000;

    function type() {
      const currentWord = words[wordIndex];
      
      if (isDeleting) {
        if (typewriterText) {
          typewriterText.textContent = currentWord.substring(0, charIndex - 1);
          charIndex--;
        }
        typingDelay = deletingDelay;
      } else {
        if (typewriterText) {
          typewriterText.textContent = currentWord.substring(0, charIndex + 1);
          charIndex++;
        }
        typingDelay = 100;
      }

      if (!isDeleting && charIndex === currentWord.length) {
        typingDelay = newWordDelay;
        isDeleting = true;
      } else if (isDeleting && charIndex === 0) {
        isDeleting = false;
        wordIndex = (wordIndex + 1) % words.length;
      }

      setTimeout(type, typingDelay);
    }

    type();
  }

  document.addEventListener('astro:page-load', setupTypewriter);
  setupTypewriter();
</script>